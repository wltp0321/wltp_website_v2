{% extends "base.html" %}

{% block title %}회원가입 - IMPERIUM Crew{% endblock %}

{% block content %}
<section style="text-align:center; padding:4rem 1rem; background-color:#fff8cc;">
    <h1 style="font-family:'Montserrat', sans-serif; font-weight:700; font-size:2.5rem; color:#1f1f1f; margin-bottom:1rem;">
        회원가입
    </h1>
    <p style="font-size:1.1rem; color:#333; opacity:0.9;">
        IMPERIUM Crew에 새롭게 가입하시고 다양한 서버 활동을 즐겨보세요.
    </p>
</section>

<section style="padding:3rem 1rem; background-color:#f0f2f5;">
    <div style="max-width:480px; margin:0 auto;">
        <div class="card-component">
            <form id="signupForm" method="POST" action="{% url 'account:signup' %}" style="display:flex; flex-direction:column; gap:1.2rem;">
                {% csrf_token %}
                {% include "account/form_errors.html" %}

                <div>
                    <label for="username" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">ID</label>
                    <input id="username" name="username" type="text" required
                           value="{{ form.username.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <div>
                    <label for="email" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">이메일</label>
                    <input id="email" name="email" type="email" required
                           value="{{ form.email.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <div>
                    <label for="nickname0" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">마인크래프트 닉네임 1 (본계정)</label>
                    <input id="nickname0" name="nickname0" type="text"
                           value="{{ form.first_name.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <div>
                    <label for="nickname1" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">마인크래프트 닉네임 2 (부계정)</label>
                    <input id="nickname1" name="nickname1" type="text"
                           value="{{ form.last_name.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <div>
                    <label for="password1" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">비밀번호</label>
                    <input id="password1" name="password1" type="password" required
                           value="{{ form.password1.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <div>
                    <label for="password2" style="display:block; font-weight:600; color:#1f1f1f; margin-bottom:0.5rem;">비밀번호 확인</label>
                    <input id="password2" name="password2" type="password" required
                           value="{{ form.password2.value|default_if_none:'' }}"
                           style="width:100%; box-sizing:border-box; padding:0.8rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; transition:all 0.3s ease;"
                           onfocus="this.style.borderColor='#ffcc00';" onblur="this.style.borderColor='#ccc';">
                </div>

                <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">

                <button type="submit" class="btn-primary" style="width:100%; font-size:1rem;">회원가입</button>
            </form>
        </div>
    </div>
</section>

<script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
<script>
grecaptcha.ready(function() {
  document.getElementById('signupForm').addEventListener('submit', function(event) {
    event.preventDefault();
    grecaptcha.execute('{{ recaptcha_site_key }}', {action: 'submit'}).then(function(token) {
      document.getElementById('g-recaptcha-response').value = token;
      document.getElementById('signupForm').submit();
    });
  });
});
</script>
{% endblock %}
